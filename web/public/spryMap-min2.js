function SpryMap(b){function f(i,b){var c=i,e=b;if(a.lockEdges)var d=-a.map.offsetWidth+a.viewingBox.offsetWidth,f=-a.map.offsetHeight+a.viewingBox.offsetHeight,c=c<d?d:c,e=e<f?f:e,c=0<c?0:c,e=0<e?0:e;a.map.style.left=c+"px";a.map.style.top=e+"px"}function g(a,b,c){a.attachEvent?(a["e"+b+c]=c,a[b+c]=function(){a["e"+b+c](window.event)},a.attachEvent("on"+b,a[b+c])):a.addEventListener(b,c,!1)}function h(a,b){this.x=a;this.y=b}var a=this;a.map=document.getElementById(b.id);a.width="undefined"==typeof b.width?
800:b.width;a.height="undefined"==typeof b.height?800:b.height;a.scrolling="undefined"==typeof b.scrolling?!0:b.scrolling;a.scrollTime="undefined"==typeof b.scrollTime?300:b.scrollTime;a.lockEdges="undefined"==typeof b.lockEdges?!0:b.lockEdges;a.viewingBox=document.createElement("div");"undefined"!=typeof b.cssClass&&(a.viewingBox.className=b.cssClass);a.mousePosition=new h;a.mouseLocations=[];a.velocity=new h;a.mouseDown=!1;a.timerId=-1;a.timerCount=0;a.map.parentNode.replaceChild(a.viewingBox,a.map);
a.viewingBox.appendChild(a.map);a.viewingBox.style.overflow="hidden";a.viewingBox.style.width=a.width+"px";a.viewingBox.style.height=a.height+"px";a.viewingBox.style.position="relative";a.map.style.position="absolute";f("undefined"==typeof b.startX?0:-b.startX,"undefined"==typeof b.startY?0:-b.startY);var d=function(b){var d=b.clientX-a.mousePosition.x+parseInt(a.map.style.left),c=b.clientY-a.mousePosition.y+parseInt(a.map.style.top);f(d,c);a.mousePosition.x=b.clientX;a.mousePosition.y=b.clientY},
j=function(){if(a.mouseDown){a.mouseLocations.unshift(new h(a.mousePosition.x,a.mousePosition.y));a.mouseLocations.length>10&&a.mouseLocations.pop()}else{var b=a.scrollTime/20,d=(b-a.timerCount)/b,c=a.velocity.y*d;f(-(a.velocity.x*d)+parseInt(a.map.style.left),-c+parseInt(a.map.style.top));if(a.timerCount==b){clearInterval(a.timerId);a.timerId=-1}++a.timerCount}};g(a.viewingBox,"mousedown",function(b){a.viewingBox.style.cursor="url(data:image/x-win-bitmap;base64,AAACAAEAICACAAcABQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAEAAAAAAAAAAAAAAgAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8AAAA/AAAAfwAAAP+AAAH/gAAB/8AAAH/AAAB/wAAA/0AAANsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//////////////////////////////////////////////////////////////////////////////////////gH///4B///8Af//+AD///AA///wAH//+AB///wAf//4AH//+AD///yT/////////////////////////////8=), default";
a.mousePosition.x=b.clientX;a.mousePosition.y=b.clientY;g(document,"mousemove",d);a.mouseDown=true;if(a.scrolling){a.timerCount=0;if(a.timerId!=0){clearInterval(a.timerId);a.timerId=0}a.timerId=setInterval(j,20)}event.preventDefault?event.preventDefault():event.returnValue=false});g(document,"mouseup",function(){if(a.mouseDown){if(document.detachEvent){document.detachEvent("onmousemove",document["mousemove"+d]);document["mousemove"+d]=null}else document.removeEventListener("mousemove",d,false);a.mouseDown=
false;if(a.mouseLocations.length>0){var b=a.mouseLocations.length;a.velocity.x=(a.mouseLocations[b-1].x-a.mouseLocations[0].x)/b;a.velocity.y=(a.mouseLocations[b-1].y-a.mouseLocations[0].y)/b;a.mouseLocations.length=0}}a.viewingBox.style.cursor="auto"})};